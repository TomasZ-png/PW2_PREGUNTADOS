<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Preguntame</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{BASE_URL}}public/css/homeStyles.css">
</head>
<body>



<div class="home-wrapper">
    <!-- Header -->
    <header class="header-section">
        <div class="logo-header">
            <img src="{{BASE_URL}}public/img/preguntame-logo-solo.png" alt="Logo Preguntame">
            <h1>Preguntame</h1>
        </div>
        {{#usuario}}
            <h2 class="welcome-message">Â¡Bienvenido, {{nombre_completo}}! ğŸ‘‹</h2>
        {{/usuario}}
        <p class="subtitle">Â¡Es hora de poner a prueba tu conocimiento!</p>
    </header>

    <!-- Contenido principal -->
    <main class="main-content">
        <!-- SecciÃ³n de acciones -->
        <div class="actions-card">
            <h2>ğŸ¯ MenÃº Principal</h2>

            <div class="buttons-grid">
                {{#esEditor}}
                    <a href="{{BASE_URL}}EditorController/home" class="action-btn btn-editor">
                        ğŸ›  Panel de Editor
                    </a>
                {{/esEditor}}

                {{#esAdmin}}
                    <a href="{{BASE_URL}}AdminController/dashboardGraficos" class="action-btn btn-admin">
                        ğŸ“Š Ver GrÃ¡ficos
                    </a>
                {{/esAdmin}}

                {{#esAdmin}}
                    <a href="{{BASE_URL}}PartidaController/iniciar" class="action-btn btn-play">
                        ğŸ® Jugar
                    </a>
                    <a href="{{BASE_URL}}PreguntaController/mostrarFormularioSugerir" class="action-btn btn-suggest">
                        ğŸ’¡ Sugerir Pregunta
                    </a>
                {{/esAdmin}}

                {{#esJugador}}
                    <a href="{{BASE_URL}}PartidaController/iniciar" class="action-btn btn-play">
                        ğŸ® Jugar
                    </a>
                    <a href="{{BASE_URL}}PreguntaController/mostrarFormularioSugerir" class="action-btn btn-suggest">
                        ğŸ’¡ Sugerir Pregunta
                    </a>
                {{/esJugador}}
            </div>
        </div>

        <!-- Ranking -->
        <div class="ranking-card">
            <h2>ğŸ† Ranking Global</h2>
            <ul class="ranking-list">
                {{#usuarios}}
                    <a href="{{BASE_URL}}PerfilController/verPerfilPublico?id={{id_usuario}}" class="ranking-item">
                    <img src="{{BASE_URL}}public/img/user-img/{{foto_perfil}}"
                         alt="{{nombre_completo}}"
                         class="ranking-avatar">
                    <div class="ranking-info">
                        <span class="ranking-name">{{nombre_completo}}</span>
                    </div>
                    <span class="ranking-score">{{puntaje_maximo_obtenido}} pts</span>
                    </a>
                {{/usuarios}}

                {{^usuarios}}
                    <li class="no-users">AÃºn no hay jugadores en el ranking.</li>
                {{/usuarios}}
            </ul>
        </div>
    </main>
</div>

<!-- Alertas -->
{{#error}}
    <div class="alert alert-danger" id="errorAlert">
        âŒ {{error}}
    </div>
{{/error}}

{{#success}}
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let msg = "";
            let emoji = "";

            if ("{{success}}" === "reporte_enviado") {
                emoji = "âœ…";
                msg = "Â¡Reporte enviado con Ã©xito! Gracias por ayudarnos a mejorar el juego.";
            }

            if ("{{success}}" === "sugerencia_enviada") {
                emoji = "ğŸ‰";
                msg = "Â¡Sugerencia enviada correctamente! El equipo de editores la revisarÃ¡.";
            }

            if (msg !== "") {
                const alertDiv = document.createElement('div');
                alertDiv.className = 'alert alert-success';
                alertDiv.innerHTML = `${emoji} ${msg}`;
                document.body.appendChild(alertDiv);

                setTimeout(() => {
                    alertDiv.style.animation = 'slideOutRight 0.4s ease-out forwards';
                    setTimeout(() => alertDiv.remove(), 400);
                }, 4000);
            }
        });
    </script>
{{/success}}

<script>
    // Auto-cerrar alertas de error despuÃ©s de 5 segundos
    const errorAlert = document.getElementById('errorAlert');
    if (errorAlert) {
        setTimeout(() => {
            errorAlert.style.animation = 'slideOutRight 0.4s ease-out forwards';
            setTimeout(() => errorAlert.remove(), 400);
        }, 5000);
    }
</script>

</body>
</html>